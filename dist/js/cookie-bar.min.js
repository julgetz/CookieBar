var CookieComponent=angular.module("CookieComponent",["ui.bootstrap","ngCookies"]);CookieComponent.factory("sharedDataServiceCookie",function(a){var b={};return b.prepForEmitPolicy=function(){a.$broadcast("handlePolicy")},b}),CookieComponent.controller("CookieController",function(a,b,c,d,e,f,g){a.init=function(){a.cookieVar=!1,a.scroll=!1,a.click=!1,a.ngModel||(ngModel=0),console.log("SCROLL: "+a.withScroll),g.hasCookie=a.cookieVar,a.output=a.ngModel},a.showCookieConsent=function(){return"undefined"==typeof f.get("cookieConsent")?(a.cookieVar=!1,!0):(a.cookieVar=!0,!1)},a.$on("handlePolicy",function(a,b){var c={},f=d.open({templateUrl:"policyContent.html",controller:ModalInstancePolicyController,size:c,resolve:{Data:function(){return g.hasCookie}}});f.result.then(function(){},function(){e.info("Modal dismissed at: "+new Date)})}),a.getCookie=function(){return"undefined"==typeof f.get("cookieConsent")?!1:!0},a.openPolicyPanel=function(){g.prepForEmitPolicy()},a.closePanel=function(){f.put("cookieConsent","y"),g.hasCookie=!0,b.hide()},angular.element(c).bind("scroll",function(){a.scroll||(f.put("cookieConsent","y"),g.hasCookie=!0,a.scroll=!0)}),angular.element(c).bind("click",function(){a.click||(f.put("cookieConsent","y"),g.hasCookie=!0,a.click=!0)})});var ModalInstancePolicyController=function(a,b,c,d){a.close=function(){c.put("cookieConsent","y"),d.hasCookie=!0,b.dismiss()}};CookieComponent.directive("cookie",["$document","$cookies","sharedDataServiceCookie",function(a,b,c){return{require:"^?ngModel",restrict:"E",replace:!0,transclude:!0,templateUrl:"dist/js/templates/cookiebar.html",scope:{color:"@",ngModel:"=",moreText:"@",closeText:"@",bodyText:"@",withScroll:"@"},controller:"CookieController",link:function(a,d,e,f){a.$watch(function(){"undefined"!=typeof b.get("cookieConsent")&&(c.hasCookie=!0),c.hasCookie&&f.$setViewValue(c.hasCookie)})}}}]);